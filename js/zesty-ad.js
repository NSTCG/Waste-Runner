(()=>{var gt=Object.create,N=Object.defineProperty;var bt=Object.getOwnPropertyDescriptor;var wt=Object.getOwnPropertyNames;var vt=Object.getPrototypeOf,xt=Object.prototype.hasOwnProperty;var Ct=t=>N(t,"__esModule",{value:!0});var c=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Et=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of wt(e))!xt.call(t,s)&&s!=="default"&&N(t,s,{get:()=>e[s],enumerable:!(r=bt(e,s))||r.enumerable});return t},se=t=>Et(Ct(N(t!=null?gt(vt(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var j=c((yr,ne)=>{"use strict";ne.exports=function(e,r){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(r,n)}}});var d=c((gr,oe)=>{"use strict";var qt=j(),w=Object.prototype.toString;function F(t){return w.call(t)==="[object Array]"}function D(t){return typeof t=="undefined"}function Tt(t){return t!==null&&!D(t)&&t.constructor!==null&&!D(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function kt(t){return w.call(t)==="[object ArrayBuffer]"}function At(t){return typeof FormData!="undefined"&&t instanceof FormData}function Rt(t){var e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function St(t){return typeof t=="string"}function Lt(t){return typeof t=="number"}function ie(t){return t!==null&&typeof t=="object"}function k(t){if(w.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function Ot(t){return w.call(t)==="[object Date]"}function Ut(t){return w.call(t)==="[object File]"}function zt(t){return w.call(t)==="[object Blob]"}function ae(t){return w.call(t)==="[object Function]"}function Pt(t){return ie(t)&&ae(t.pipe)}function Bt(t){return typeof URLSearchParams!="undefined"&&t instanceof URLSearchParams}function Nt(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}function jt(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function M(t,e){if(!(t===null||typeof t=="undefined"))if(typeof t!="object"&&(t=[t]),F(t))for(var r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.call(null,t[n],n,t)}function _(){var t={};function e(n,i){k(t[i])&&k(n)?t[i]=_(t[i],n):k(n)?t[i]=_({},n):F(n)?t[i]=n.slice():t[i]=n}for(var r=0,s=arguments.length;r<s;r++)M(arguments[r],e);return t}function Ft(t,e,r){return M(e,function(n,i){r&&typeof n=="function"?t[i]=qt(n,r):t[i]=n}),t}function Dt(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}oe.exports={isArray:F,isArrayBuffer:kt,isBuffer:Tt,isFormData:At,isArrayBufferView:Rt,isString:St,isNumber:Lt,isObject:ie,isPlainObject:k,isUndefined:D,isDate:Ot,isFile:Ut,isBlob:zt,isFunction:ae,isStream:Pt,isURLSearchParams:Bt,isStandardBrowserEnv:jt,forEach:M,merge:_,extend:Ft,trim:Nt,stripBOM:Dt}});var $=c((br,le)=>{"use strict";var x=d();function ue(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}le.exports=function(e,r,s){if(!r)return e;var n;if(s)n=s(r);else if(x.isURLSearchParams(r))n=r.toString();else{var i=[];x.forEach(r,function(l,g){l===null||typeof l=="undefined"||(x.isArray(l)?g=g+"[]":l=[l],x.forEach(l,function(m){x.isDate(m)?m=m.toISOString():x.isObject(m)&&(m=JSON.stringify(m)),i.push(ue(g)+"="+ue(m))}))}),n=i.join("&")}if(n){var u=e.indexOf("#");u!==-1&&(e=e.slice(0,u)),e+=(e.indexOf("?")===-1?"?":"&")+n}return e}});var pe=c((wr,ce)=>{"use strict";var Mt=d();function A(){this.handlers=[]}A.prototype.use=function(e,r){return this.handlers.push({fulfilled:e,rejected:r}),this.handlers.length-1};A.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};A.prototype.forEach=function(e){Mt.forEach(this.handlers,function(s){s!==null&&e(s)})};ce.exports=A});var de=c((vr,fe)=>{"use strict";var _t=d();fe.exports=function(e,r,s){return _t.forEach(s,function(i){e=i(e,r)}),e}});var I=c((xr,he)=>{"use strict";he.exports=function(e){return!!(e&&e.__CANCEL__)}});var ye=c((Cr,me)=>{"use strict";var $t=d();me.exports=function(e,r){$t.forEach(e,function(n,i){i!==r&&i.toUpperCase()===r.toUpperCase()&&(e[r]=n,delete e[i])})}});var be=c((Er,ge)=>{"use strict";ge.exports=function(e,r,s,n,i){return e.config=r,s&&(e.code=s),e.request=n,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}});var H=c((qr,we)=>{"use strict";var It=be();we.exports=function(e,r,s,n,i){var u=new Error(e);return It(u,r,s,n,i)}});var xe=c((Tr,ve)=>{"use strict";var Ht=H();ve.exports=function(e,r,s){var n=s.config.validateStatus;!s.status||!n||n(s.status)?e(s):r(Ht("Request failed with status code "+s.status,s.config,null,s.request,s))}});var Ee=c((kr,Ce)=>{"use strict";var R=d();Ce.exports=R.isStandardBrowserEnv()?function(){return{write:function(r,s,n,i,u,a){var l=[];l.push(r+"="+encodeURIComponent(s)),R.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),R.isString(i)&&l.push("path="+i),R.isString(u)&&l.push("domain="+u),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(r){var s=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var Te=c((Ar,qe)=>{"use strict";qe.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}});var Ae=c((Rr,ke)=>{"use strict";ke.exports=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}});var Se=c((Sr,Re)=>{"use strict";var Wt=Te(),Kt=Ae();Re.exports=function(e,r){return e&&!Wt(r)?Kt(e,r):r}});var Oe=c((Lr,Le)=>{"use strict";var W=d(),Vt=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];Le.exports=function(e){var r={},s,n,i;return e&&W.forEach(e.split(`
`),function(a){if(i=a.indexOf(":"),s=W.trim(a.substr(0,i)).toLowerCase(),n=W.trim(a.substr(i+1)),s){if(r[s]&&Vt.indexOf(s)>=0)return;s==="set-cookie"?r[s]=(r[s]?r[s]:[]).concat([n]):r[s]=r[s]?r[s]+", "+n:n}}),r}});var Pe=c((Or,ze)=>{"use strict";var Ue=d();ze.exports=Ue.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),s;function n(i){var u=i;return e&&(r.setAttribute("href",u),u=r.href),r.setAttribute("href",u),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return s=n(window.location.href),function(u){var a=Ue.isString(u)?n(u):u;return a.protocol===s.protocol&&a.host===s.host}}():function(){return function(){return!0}}()});var V=c((Ur,Be)=>{"use strict";var S=d(),Xt=xe(),Jt=Ee(),Gt=$(),Zt=Se(),Qt=Oe(),Yt=Pe(),K=H();Be.exports=function(e){return new Promise(function(s,n){var i=e.data,u=e.headers;S.isFormData(i)&&delete u["Content-Type"];var a=new XMLHttpRequest;if(e.auth){var l=e.auth.username||"",g=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";u.Authorization="Basic "+btoa(l+":"+g)}var E=Zt(e.baseURL,e.url);if(a.open(e.method.toUpperCase(),Gt(E,e.params,e.paramsSerializer),!0),a.timeout=e.timeout,a.onreadystatechange=function(){if(!(!a||a.readyState!==4)&&!(a.status===0&&!(a.responseURL&&a.responseURL.indexOf("file:")===0))){var o="getAllResponseHeaders"in a?Qt(a.getAllResponseHeaders()):null,q=!e.responseType||e.responseType==="text"?a.responseText:a.response,yt={data:q,status:a.status,statusText:a.statusText,headers:o,config:e,request:a};Xt(s,n,yt),a=null}},a.onabort=function(){!a||(n(K("Request aborted",e,"ECONNABORTED",a)),a=null)},a.onerror=function(){n(K("Network Error",e,null,a)),a=null},a.ontimeout=function(){var o="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(o=e.timeoutErrorMessage),n(K(o,e,"ECONNABORTED",a)),a=null},S.isStandardBrowserEnv()){var m=(e.withCredentials||Yt(E))&&e.xsrfCookieName?Jt.read(e.xsrfCookieName):void 0;m&&(u[e.xsrfHeaderName]=m)}if("setRequestHeader"in a&&S.forEach(u,function(o,q){typeof i=="undefined"&&q.toLowerCase()==="content-type"?delete u[q]:a.setRequestHeader(q,o)}),S.isUndefined(e.withCredentials)||(a.withCredentials=!!e.withCredentials),e.responseType)try{a.responseType=e.responseType}catch(p){if(e.responseType!=="json")throw p}typeof e.onDownloadProgress=="function"&&a.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&a.upload&&a.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(o){!a||(a.abort(),n(o),a=null)}),i||(i=null),a.send(i)})}});var X=c((zr,Fe)=>{"use strict";var h=d(),Ne=ye(),er={"Content-Type":"application/x-www-form-urlencoded"};function je(t,e){!h.isUndefined(t)&&h.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function tr(){var t;return typeof XMLHttpRequest!="undefined"?t=V():typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&(t=V()),t}var L={adapter:tr(),transformRequest:[function(e,r){return Ne(r,"Accept"),Ne(r,"Content-Type"),h.isFormData(e)||h.isArrayBuffer(e)||h.isBuffer(e)||h.isStream(e)||h.isFile(e)||h.isBlob(e)?e:h.isArrayBufferView(e)?e.buffer:h.isURLSearchParams(e)?(je(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):h.isObject(e)?(je(r,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if(typeof e=="string")try{e=JSON.parse(e)}catch(r){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};L.headers={common:{Accept:"application/json, text/plain, */*"}};h.forEach(["delete","get","head"],function(e){L.headers[e]={}});h.forEach(["post","put","patch"],function(e){L.headers[e]=h.merge(er)});Fe.exports=L});var _e=c((Pr,Me)=>{"use strict";var De=d(),J=de(),rr=I(),sr=X();function G(t){t.cancelToken&&t.cancelToken.throwIfRequested()}Me.exports=function(e){G(e),e.headers=e.headers||{},e.data=J(e.data,e.headers,e.transformRequest),e.headers=De.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),De.forEach(["delete","get","head","post","put","patch","common"],function(n){delete e.headers[n]});var r=e.adapter||sr.adapter;return r(e).then(function(n){return G(e),n.data=J(n.data,n.headers,e.transformResponse),n},function(n){return rr(n)||(G(e),n&&n.response&&(n.response.data=J(n.response.data,n.response.headers,e.transformResponse))),Promise.reject(n)})}});var Z=c((Br,$e)=>{"use strict";var f=d();$e.exports=function(e,r){r=r||{};var s={},n=["url","method","data"],i=["headers","auth","proxy","params"],u=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function l(p,o){return f.isPlainObject(p)&&f.isPlainObject(o)?f.merge(p,o):f.isPlainObject(o)?f.merge({},o):f.isArray(o)?o.slice():o}function g(p){f.isUndefined(r[p])?f.isUndefined(e[p])||(s[p]=l(void 0,e[p])):s[p]=l(e[p],r[p])}f.forEach(n,function(o){f.isUndefined(r[o])||(s[o]=l(void 0,r[o]))}),f.forEach(i,g),f.forEach(u,function(o){f.isUndefined(r[o])?f.isUndefined(e[o])||(s[o]=l(void 0,e[o])):s[o]=l(void 0,r[o])}),f.forEach(a,function(o){o in r?s[o]=l(e[o],r[o]):o in e&&(s[o]=l(void 0,e[o]))});var E=n.concat(i).concat(u).concat(a),m=Object.keys(e).concat(Object.keys(r)).filter(function(o){return E.indexOf(o)===-1});return f.forEach(m,g),s}});var Ke=c((Nr,We)=>{"use strict";var Ie=d(),nr=$(),He=pe(),ir=_e(),O=Z();function T(t){this.defaults=t,this.interceptors={request:new He,response:new He}}T.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=O(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=[ir,void 0],s=Promise.resolve(e);for(this.interceptors.request.forEach(function(i){r.unshift(i.fulfilled,i.rejected)}),this.interceptors.response.forEach(function(i){r.push(i.fulfilled,i.rejected)});r.length;)s=s.then(r.shift(),r.shift());return s};T.prototype.getUri=function(e){return e=O(this.defaults,e),nr(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};Ie.forEach(["delete","get","head","options"],function(e){T.prototype[e]=function(r,s){return this.request(O(s||{},{method:e,url:r,data:(s||{}).data}))}});Ie.forEach(["post","put","patch"],function(e){T.prototype[e]=function(r,s,n){return this.request(O(n||{},{method:e,url:r,data:s}))}});We.exports=T});var Y=c((jr,Ve)=>{"use strict";function Q(t){this.message=t}Q.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};Q.prototype.__CANCEL__=!0;Ve.exports=Q});var Je=c((Fr,Xe)=>{"use strict";var ar=Y();function U(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(n){e=n});var r=this;t(function(n){r.reason||(r.reason=new ar(n),e(r.reason))})}U.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};U.source=function(){var e,r=new U(function(n){e=n});return{token:r,cancel:e}};Xe.exports=U});var Ze=c((Dr,Ge)=>{"use strict";Ge.exports=function(e){return function(s){return e.apply(null,s)}}});var Ye=c((Mr,Qe)=>{"use strict";Qe.exports=function(e){return typeof e=="object"&&e.isAxiosError===!0}});var rt=c((_r,ee)=>{"use strict";var et=d(),or=j(),z=Ke(),ur=Z(),lr=X();function tt(t){var e=new z(t),r=or(z.prototype.request,e);return et.extend(r,z.prototype,e),et.extend(r,e),r}var y=tt(lr);y.Axios=z;y.create=function(e){return tt(ur(y.defaults,e))};y.Cancel=Y();y.CancelToken=Je();y.isCancel=I();y.all=function(e){return Promise.all(e)};y.spread=Ze();y.isAxiosError=Ye();ee.exports=y;ee.exports.default=y});var te=c(($r,st)=>{st.exports=rt()});var v=se(te());var nt=se(te()),P=t=>{if(t.substring(0,4)==="ipfs")return`https://ipfs.zesty.market/ipfs/${t.substring(7)}`;if(t.substring(0,4)==="http")return t;if(t.substring(0,5)==="https")return t;if(t.substring(0,2)==="ar")nt.default.get(`https://arweave.net/${t.substring(5)}`).then(e=>e.url).catch(e=>{console.error(e)});else return`https://ipfs.zesty.market/ipfs/${t}`},b=()=>{let t=[{gateway:"https://cloudflare-ipfs.com",weight:35},{gateway:"https://ipfs.fleek.co",weight:35},{gateway:"https://gateway.pinata.cloud",weight:20},{gateway:"https://dweb.link",weight:10}],e=[],r;for(r=0;r<t.length;r++)e[r]=t[r].weight+(e[r-1]||0);let s=Math.random()*e[e.length-1];for(r=0;r<e.length&&!(e[r]>s);r++);return t[r].gateway},cr=()=>window.XRHand!=null&&window.XRMediaBinding!=null,it=t=>{if(!!t){if(cr()&&t.includes("https://www.oculus.com/experiences/quest/")){setTimeout(()=>{window.open(t,"_blank")},1e3);return}window.open(t,"_blank")}},at=t=>t.indexOf("utm_source=")!==-1||t.indexOf("utm_campaign=")!==-1||t.indexOf("utm_channel=")!==-1,ot=(t,e)=>{let r=new URL(t);return r.searchParams.set("utm_source","ZestyMarket"),r.searchParams.set("utm_campaign","ZestyCampaign"),r.searchParams.set("utm_channel",`CampaignId_${e}`),r.href};var C={tall:{width:.75,height:1,style:{standard:`${b()}/ipns/lib.zesty.market/assets/zesty-banner-tall.png`,minimal:`${b()}/ipns/lib.zesty.market/assets/zesty-banner-tall-minimal.png`,transparent:`${b()}/ipns/lib.zesty.market/assets/zesty-banner-tall-transparent.png`}},wide:{width:4,height:1,style:{standard:`${b()}/ipns/lib.zesty.market/assets/zesty-banner-wide.png`,minimal:`${b()}/ipns/lib.zesty.market/assets/zesty-banner-wide-minimal.png`,transparent:`${b()}/ipns/lib.zesty.market/assets/zesty-banner-wide-transparent.png`}},square:{width:1,height:1,style:{standard:`${b()}/ipns/lib.zesty.market/assets/zesty-banner-square.png`,minimal:`${b()}/ipns/lib.zesty.market/assets/zesty-banner-square-minimal.png`,transparent:`${b()}/ipns/lib.zesty.market/assets/zesty-banner-square-transparent.png`}}},B="square",ut="standard";var lt="https://beacon.zesty.market",ct="https://beacon2.zesty.market/zgraphql",pr={matic:"https://api.thegraph.com/subgraphs/name/zestymarket/zesty-market-graph-matic",polygon:"https://api.thegraph.com/subgraphs/name/zestymarket/zesty-market-graph-matic",rinkeby:"https://api.thegraph.com/subgraphs/name/zestymarket/zesty-market-graph-rinkeby"},re={uri:void 0},fr={name:"Default banner",description:"This is the default banner that would be displayed ipsum",image:"https://ipfs.zesty.market/ipfs/QmWBNfP8roDrwz3XQo4qpu9fMxvUSTn8LB7d4JK7ybrfZ2/assets/zesty-ad-square.png",url:"https://www.zesty.market"},pt=async(t,e,r="polygon")=>{let s=Math.floor(Date.now()/1e3);return v.default.post(pr[r],{query:`
      query {
        tokenDatas (
          where: {
            id: "${t}"
            creator: "${e}"
          }
        )
        { 
          sellerNFTSetting {
            sellerAuctions (
              first: 5
              where: {
                contractTimeStart_lte: ${s}
                contractTimeEnd_gte: ${s}
                cancelled: false
              }
            ) {
              id
              buyerCampaigns {
                id
                uri
              }
              buyerCampaignsApproved
            }
          }
          id
        }
      }
    `}).then(n=>dr(n)).catch(n=>(console.log(n),re))},dr=t=>{if(t.status!=200)return re;let e=t.data.data.tokenDatas[0]?.sellerNFTSetting?.sellerAuctions,r=e[0]?.buyerCampaigns?.find((s,n)=>{if(e[0].buyerCampaignsApproved[n])return s});return r??re},ft=async(t,e,r,s,n)=>{if(!t){let i={uri:"DEFAULT_URI",data:fr},u=e||B,a=r||ut,l=n||C;return i.data.image=l[u].style[a],i}return v.default.get(P(t)).then(i=>(at(i.data.url)||(i.data.url=ot(i.data.url,s)),i.status==200?{uri:t,data:i.data}:null))},dt=async t=>{try{let e=lt+`/api/v1/space/${t}`;await v.default.put(e),await v.default.post(ct,{query:`mutation { increment(eventType: visits, spaceId: "${t}") { message } }`},{headers:{"Content-Type":"application/json"}})}catch(e){console.log("Failed to emit onload event",e.message)}},ht=async t=>{try{let e=lt+`/api/v1/space/click/${t}`;await v.default.put(e),await v.default.post(ct,{query:`mutation { increment(eventType: clicks, spaceId: "${t}") { message } }`},{headers:{"Content-Type":"application/json"}})}catch(e){console.log("Failed to emit onclick event",e.message)}};var mt="1.5.2";console.log("Zesty SDK Version: ",mt);WL.registerComponent("zesty-banner",{creator:{type:WL.Type.String},space:{type:WL.Type.Int},network:{type:WL.Type.Enum,values:["rinkeby","polygon"],default:"polygon"},format:{type:WL.Type.Enum,values:Object.keys(C),default:B},style:{type:WL.Type.Enum,values:["standard","minimal","transparent"],default:"transparent"},scaleToRatio:{type:WL.Type.Bool,default:!0},textureProperty:{type:WL.Type.String,default:"auto"},beacon:{type:WL.Type.Bool,default:!1},dynamicFormats:{type:WL.Type.Bool,default:!0},createAutomaticCollision:{type:WL.Type.Bool,default:!0}},{init:function(){this.formats=Object.values(C),this.formatKeys=Object.keys(C),this.styleKeys=["standard","minimal","transparent"]},start:function(){if(this.mesh=this.object.getComponent("mesh"),!this.mesh)throw new Error("'zesty-banner ' missing mesh component");if(this.createAutomaticCollision&&(this.collision=this.object.getComponent("collision")||this.object.addComponent("collision",{collider:WL.Collider.Box,group:2}),this.cursorTarget=this.object.getComponent("cursor-target")||this.object.addComponent("cursor-target"),this.cursorTarget.addClickFunction(this.onClick.bind(this))),this.dynamicFormats){let t=document.createElement("script");t.onload=()=>{this.formatsOverride=zestyFormats.formats,this.startLoading()},t.setAttribute("src","https://ipfs.io/ipns/lib.zesty.market/zesty-formats.js"),t.setAttribute("crossorigin","anonymous"),document.body.appendChild(t)}else this.startLoading()},startLoading:function(){this.loadBanner(this.space,this.creator,this.network,this.formatKeys[this.format],this.styleKeys[this.style]).then(t=>{this.banner=t,this.scaleToRatio&&(this.height=this.object.scalingLocal[1],this.object.resetScaling(),this.createAutomaticCollision&&(this.collision.extents=[this.formats[this.format].width*this.height,this.height,.1]),this.object.scale([this.formats[this.format].width*this.height,this.height,1]));let e=this.mesh.material.clone();if(this.textureProperty==="auto"){let r=e.pipeline||e.shader;if(r==="Phong Opaque Textured")e.diffuseTexture=t.texture,e.alphaMaskThreshold=.3;else if(r==="Flat Opaque Textured")e.flatTexture=t.texture,e.alphaMaskThreshold=.8;else throw Error("'zesty-banner ' unable to apply banner texture: unsupported pipeline "+e.shader);this.mesh.material=e}else this.mesh.material[this.textureProperty]=t.texture;this.beacon&&dt(this.space)})},onClick:function(){this.banner?.url&&(WL.xrSession?WL.xrSession.end().then(this.executeClick.bind(this)):this.executeClick())},executeClick:function(){it(this.banner.url),this.beacon&&ht(this.space)},loadBanner:async function(t,e,r,s,n){r=r?"polygon":"rinkeby";let i=await pt(t,e,r),u=await ft(i.uri,s,n,t,this.formatsOverride),a=u.data.url;a=a.match(/^http[s]?:\/\//)?a:"https://"+a,a==="https://www.zesty.market"&&(a=`https://app.zesty.market/space/${t}`);let l=u.data.image;return l=l.match(/^.+\.(png|jpe?g)/i)?l:P(l),WL.textures.load(l,"").then(g=>(u.texture=g,u.imageSrc=l,u.url=a,u))}});})();
//# sourceMappingURL=zesty-wonderland-sdk.js.map